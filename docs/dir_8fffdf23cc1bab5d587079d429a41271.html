<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Electrochemical Gas Sensor Library: ADS1X15 Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Electrochemical Gas Sensor Library<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">A library for the Electrochemical Gas Sensor breakout board</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_8fffdf23cc1bab5d587079d429a41271.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">ADS1X15 Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="icondoc"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_a_d_s1_x15_8cpp.html">ADS1X15.cpp</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><a href="_a_d_s1_x15_8h_source.html"><span class="icondoc"></span></a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_a_d_s1_x15_8h.html">ADS1X15.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><a href="https://github.com/marketplace/actions/arduino_ci"><img src="https://github.com/RobTillaart/ADS1X15/workflows/Arduino%20CI/badge.svg" alt="Arduino CI" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/RobTillaart/ADS1X15/actions/workflows/arduino-lint.yml"><img src="https://github.com/RobTillaart/ADS1X15/actions/workflows/arduino-lint.yml/badge.svg" alt="Arduino-lint" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/RobTillaart/ADS1X15/actions/workflows/jsoncheck.yml"><img src="https://github.com/RobTillaart/ADS1X15/actions/workflows/jsoncheck.yml/badge.svg" alt="JSON check" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/RobTillaart/ADS1X15/blob/master/LICENSE"><img src="https://img.shields.io/badge/license-MIT-green.svg" alt="License: MIT" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/RobTillaart/ADS1X15/releases"><img src="https://img.shields.io/github/release/RobTillaart/ADS1X15.svg?maxAge=3600" alt="GitHub release" style="pointer-events: none;" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md34"></a>
ADS1X15</h1>
<p>Arduino library for I2C ADC <a class="el" href="class_a_d_s1015.html">ADS1015</a>, <a class="el" href="class_a_d_s1115.html">ADS1115</a>, and similar.</p>
<p>For using I2C ADC with Raspberry pi or other SBC with Linux OS, you can check similar library <a href="https://github.com/chandrawi/ADS1x15-ADC">here</a>.</p>
<h2><a class="anchor" id="autotoc_md35"></a>
Description</h2>
<p>This library should work for the devices mentioned below, although not all sensors support all functionality.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Device   </th><th class="markdownTableHeadCenter">Channels   </th><th class="markdownTableHeadCenter">Resolution   </th><th class="markdownTableHeadCenter">Max sps   </th><th class="markdownTableHeadCenter">Comparator   </th><th class="markdownTableHeadCenter">ProgGainAMP   </th><th class="markdownTableHeadLeft">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><a class="el" href="class_a_d_s1013.html">ADS1013</a>   </td><td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyCenter">12   </td><td class="markdownTableBodyCenter">3300   </td><td class="markdownTableBodyCenter">N   </td><td class="markdownTableBodyCenter">N   </td><td class="markdownTableBodyLeft"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><a class="el" href="class_a_d_s1014.html">ADS1014</a>   </td><td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyCenter">12   </td><td class="markdownTableBodyCenter">3300   </td><td class="markdownTableBodyCenter">Y   </td><td class="markdownTableBodyCenter">Y   </td><td class="markdownTableBodyLeft"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><a class="el" href="class_a_d_s1015.html">ADS1015</a>   </td><td class="markdownTableBodyCenter">4   </td><td class="markdownTableBodyCenter">12   </td><td class="markdownTableBodyCenter">3300   </td><td class="markdownTableBodyCenter">Y   </td><td class="markdownTableBodyCenter">Y   </td><td class="markdownTableBodyLeft"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><a class="el" href="class_a_d_s1113.html">ADS1113</a>   </td><td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyCenter">16   </td><td class="markdownTableBodyCenter">860   </td><td class="markdownTableBodyCenter">N   </td><td class="markdownTableBodyCenter">N   </td><td class="markdownTableBodyLeft"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><a class="el" href="class_a_d_s1114.html">ADS1114</a>   </td><td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyCenter">16   </td><td class="markdownTableBodyCenter">860   </td><td class="markdownTableBodyCenter">Y   </td><td class="markdownTableBodyCenter">Y   </td><td class="markdownTableBodyLeft"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><a class="el" href="class_a_d_s1115.html">ADS1115</a>   </td><td class="markdownTableBodyCenter">4   </td><td class="markdownTableBodyCenter">16   </td><td class="markdownTableBodyCenter">860   </td><td class="markdownTableBodyCenter">Y   </td><td class="markdownTableBodyCenter">Y   </td><td class="markdownTableBodyLeft">Tested   </td></tr>
</table>
<p>As the 1015 and the 1115 are both 4 channels these are the most interesting from functionality point of view as these can also do differential measurement.</p>
<p>The address of the ADS1113/4/5 is determined by to which pin the <b>ADDR</b> is connected to:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">ADDR pin connected to   </th><th class="markdownTableHeadCenter">Address   </th><th class="markdownTableHeadCenter">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">GND   </td><td class="markdownTableBodyCenter">0x48   </td><td class="markdownTableBodyCenter">default    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">VDD   </td><td class="markdownTableBodyCenter">0x49   </td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">SDA   </td><td class="markdownTableBodyCenter">0x4A   </td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">SCL   </td><td class="markdownTableBodyCenter">0x4B   </td><td class="markdownTableBodyCenter"></td></tr>
</table>
<h2><a class="anchor" id="autotoc_md36"></a>
Interface</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_a_d_s1_x15_8h.html">ADS1X15.h</a>&quot;</span></div>
<div class="ttc" id="a_a_d_s1_x15_8h_html"><div class="ttname"><a href="_a_d_s1_x15_8h.html">ADS1X15.h</a></div></div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md37"></a>
Initializing</h4>
<p>To initialize the library you must call constructor as described below.</p>
<ul>
<li><b>ADS1x15()</b> base constructor, should not be used.</li>
<li><b><a class="el" href="class_a_d_s1013.html">ADS1013</a>(uint8_t address, TwoWire *wire = &amp;Wire)</b> Constructor with device address, and optional the Wire interface as parameter.</li>
<li><b><a class="el" href="class_a_d_s1014.html">ADS1014</a>(uint8_t address, TwoWire *wire = &amp;Wire)</b> Constructor with device address, and optional the Wire interface as parameter.</li>
<li><b><a class="el" href="class_a_d_s1015.html">ADS1015</a>(uint8_t address, TwoWire *wire = &amp;Wire)</b> Constructor with device address, and optional the Wire interface as parameter.</li>
<li><b><a class="el" href="class_a_d_s1113.html">ADS1113</a>(uint8_t address, TwoWire *wire = &amp;Wire)</b> Constructor with device address, and optional the Wire interface as parameter.</li>
<li><b><a class="el" href="class_a_d_s1114.html">ADS1114</a>(uint8_t address, TwoWire *wire = &amp;Wire)</b> Constructor with device address, and optional the Wire interface as parameter.</li>
<li><b><a class="el" href="class_a_d_s1115.html">ADS1115</a>(uint8_t address, TwoWire *wire = &amp;Wire)</b> Constructor with device address, and optional the Wire interface as parameter.</li>
</ul>
<p>After construction the <b>ADS.begin()</b> need to be called. This will return false if an invalid address is used. The function <b>bool isConnected()</b> can be used to verify the reading of the ADS. The function <b>void reset()</b> is sets the parameters to their initial value as in the constructor.</p>
<p>For example.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_a_d_s1_x15_8h.html">ADS1X15.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// initialize ADS1115 on I2C bus 1 with default address 0x48</span></div>
<div class="line"><a class="code hl_class" href="class_a_d_s1115.html">ADS1115</a> ADS(0x48);</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> begin() {</div>
<div class="line">  <span class="keywordflow">if</span> (!ADS.isConnected()) {</div>
<div class="line">    <span class="comment">// error ADS1115 not connected</span></div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="ttc" id="aclass_a_d_s1115_html"><div class="ttname"><a href="class_a_d_s1115.html">ADS1115</a></div><div class="ttdef"><b>Definition</b> ADS1X15.h:210</div></div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md38"></a>
I2C clock speed</h4>
<p>The function <b>void setWireClock(uint32_t speed = 100000)</b> is used to set the clock speed in Hz of the used I2C interface. typical value is 100 KHz.</p>
<p>The function <b>uint32_t getWireClock()</b> is a prototype. It returns the value set by setWireClock(). This is not necessary the actual value. When no value is set <b>getWireClock()</b> returns 0. Need to implement a read / calculate from low level I2C code (e.g. TWBR on AVR), better the Arduino Wire lib should support this call (ESP32 does).</p>
<p>See - <a href="https://github.com/arduino/Arduino/issues/11457">https://github.com/arduino/Arduino/issues/11457</a></p>
<p>Question: should this functionality be in this library?</p>
<h4><a class="anchor" id="autotoc_md39"></a>
Programmable Gain</h4>
<ul>
<li><b>void setGain(uint8_t gain)</b> set the gain value, indicating the maxVoltage that can be measured Adjusting the gain allowing to make more precise measurements. Note: the gain is not set in the device until an explicit read/request of the ADC (any read call will do). See table below.</li>
<li><b>uint8_t getGain()</b> returns the gain value (index).</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">PGA value   </th><th class="markdownTableHeadCenter">Max Voltage   </th><th class="markdownTableHeadCenter">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyCenter">±6.144V   </td><td class="markdownTableBodyCenter">default    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyCenter">±4.096V   </td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">2   </td><td class="markdownTableBodyCenter">±2.048V   </td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">4   </td><td class="markdownTableBodyCenter">±1.024V   </td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">8   </td><td class="markdownTableBodyCenter">±0.512V   </td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">16   </td><td class="markdownTableBodyCenter">±0.256V   </td><td class="markdownTableBodyCenter"></td></tr>
</table>
<ul>
<li><b>float getMaxVoltage()</b> returns the max voltage with the current gain.</li>
<li><b>float toVoltage(int16_t raw = 1)</b> converts a raw measurement to a voltage. Can be used for normal and differential measurements. The default value of 1 returns the conversion factor for any raw number.</li>
</ul>
<p>The voltage factor can also be used to set HIGH and LOW threshold registers with a voltage in the comparator mode. Check the <a href="https://github.com/RobTillaart/ADS1X15/blob/master/examples/ADS_read_comparator_1/ADS_read_comparator_1.ino">examples</a>.</p>
<div class="fragment"><div class="line"><span class="keywordtype">float</span> f = ADS.toVoltage();</div>
<div class="line">ADS.setComparatorThresholdLow( 3.0 / f );</div>
<div class="line">ADS.setComparatorThresholdLow( 4.3 / f );</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md40"></a>
Operational mode</h4>
<p>The ADS sensor can operate in single shot or continuous mode. Depending on how often conversions needed you can tune the mode.</p><ul>
<li><b>void setMode(uint8_t mode)</b> 0 = CONTINUOUS, 1 = SINGLE (default) Note: the mode is not set in the device until an explicit read/request of the ADC (any read call will do).</li>
<li><b>uint8_t getMode()</b> returns current mode 0 or 1, or ADS1X15_INVALID_MODE = 0xFE.</li>
</ul>
<h4><a class="anchor" id="autotoc_md41"></a>
Data rate</h4>
<ul>
<li><b>void setDataRate(uint8_t dataRate)</b> Data rate depends on type of device. For all devices the index 0..7 can be used, see table below. Values above 7 ==&gt; will be set to the default 4. Note: the data rate is not set in the device until an explicit read/request of the ADC (any read call will do).</li>
<li><b>uint8_t getDataRate()</b> returns the current data rate (index).</li>
</ul>
<p>The library has no means to convert this index to the actual numbers as that would take 32 bytes.</p>
<p>Data rate in samples per second, based on datasheet is described on table below.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">data rate   </th><th class="markdownTableHeadRight">ADS101x   </th><th class="markdownTableHeadRight">ADS111x   </th><th class="markdownTableHeadCenter">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyRight">128   </td><td class="markdownTableBodyRight">8   </td><td class="markdownTableBodyCenter">slowest    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyRight">250   </td><td class="markdownTableBodyRight">16   </td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">2   </td><td class="markdownTableBodyRight">490   </td><td class="markdownTableBodyRight">32   </td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">3   </td><td class="markdownTableBodyRight">920   </td><td class="markdownTableBodyRight">64   </td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">4   </td><td class="markdownTableBodyRight">1600   </td><td class="markdownTableBodyRight">128   </td><td class="markdownTableBodyCenter">default    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">5   </td><td class="markdownTableBodyRight">2400   </td><td class="markdownTableBodyRight">250   </td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">6   </td><td class="markdownTableBodyRight">3300   </td><td class="markdownTableBodyRight">475   </td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">7   </td><td class="markdownTableBodyRight">3300   </td><td class="markdownTableBodyRight">860   </td><td class="markdownTableBodyCenter">fastest   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md42"></a>
ReadADC Single mode</h4>
<p>Reading the ADC is very straightforward, the <b>readADC()</b> function handles all in one call. Under the hood it uses the asynchronous calls.</p><ul>
<li><b>int16_t readADC(uint8_t pin = 0)</b> normal ADC functionality, pin = 0..3. If the pin number is out of range, this function will return 0. Default pin = 0 as this is convenient for 1 channel devices.</li>
</ul>
<div class="fragment"><div class="line"><span class="comment">// read ADC in pin 2</span></div>
<div class="line">ADS.readADC(2);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// read ADC in pin 0 - two ways</span></div>
<div class="line">ADS.readADC();</div>
<div class="line">ADS.readADC(0);</div>
</div><!-- fragment --><p>See <a href="https://github.com/RobTillaart/ADS1X15/blob/master/examples/ADS_minimum/ADS_minimum.ino">examples</a>.</p>
<p>To read the ADC in an asynchronous way (e.g. to minimize blocking) you need call three functions:</p><ul>
<li><b>void requestADC(uint8_t pin = 0)</b> Start the conversion. pin = 0..3. Default pin = 0 as this is convenient for 1 channel devices.</li>
<li><b>bool isBusy()</b> Is the conversion not ready yet? Works only in SINGLE mode!</li>
<li><b>bool isReady()</b> Is the conversion ready? Works only in SINGLE mode! (= wrapper around <b>isBusy()</b> )</li>
<li><b>int16_t getValue()</b> Read the result of the conversion.</li>
</ul>
<p>in terms of code </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> setup()</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// other setup things here</span></div>
<div class="line">  ADS.setMode(1);               <span class="comment">// SINGLE SHOT MODE</span></div>
<div class="line">  ADS.requestADC(pin);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> loop()</div>
<div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span> (ADS.isReady())</div>
<div class="line">  {</div>
<div class="line">    value = ADS.getValue();</div>
<div class="line">    ADS.requestADC(pin);       <span class="comment">// request new conversion</span></div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// do other things here</span></div>
<div class="line">}</div>
</div><!-- fragment --><p> See <a href="https://github.com/RobTillaart/ADS1X15/blob/master/examples/ADS_read_async/ADS_read_async.ino">examples</a>.</p>
<h4><a class="anchor" id="autotoc_md43"></a>
ReadADC Differential</h4>
<p>For reading the ADC in a differential way there are 4 calls possible.</p>
<ul>
<li><b>int16_t readADC_Differential_0_1()</b> returns the difference between 2 ADC pins.</li>
<li><b>int16_t readADC_Differential_0_3()</b> ADS1x15 only</li>
<li><b>int16_t readADC_Differential_1_3()</b> ADS1x15 only</li>
<li><b>int16_t readADC_Differential_2_3()</b> ADS1x15 only</li>
<li><b>int16_t readADC_Differential_0_2()</b> ADS1x15 only - in software (no async equivalent)</li>
<li><b>int16_t readADC_Differential_1_2()</b> ADS1x15 only - in software (no async equivalent)</li>
</ul>
<div class="fragment"><div class="line"><span class="comment">// read differential ADC between pin 0 and 1</span></div>
<div class="line">ADS.readADC_Differential_0_1(0);</div>
</div><!-- fragment --><p>The differential reading of the ADC can also be done with asynchronous calls.</p>
<ul>
<li><b>void requestADC_Differential_0_1()</b> starts conversion for differential reading</li>
<li><b>void requestADC_Differential_0_3()</b> ADS1x15 only</li>
<li><b>void requestADC_Differential_1_3()</b> ADS1x15 only</li>
<li><b>void requestADC_Differential_2_3()</b> ADS1x15 only</li>
</ul>
<p>After one of these calls you need to call</p><ul>
<li><b>int16_t getValue()</b> Read the result of the last conversion.</li>
</ul>
<p>See <a href="https://github.com/RobTillaart/ADS1X15/blob/master/examples/ADS_differential/ADS_differential.ino">examples</a>.</p>
<h4><a class="anchor" id="autotoc_md44"></a>
ReadADC continuous mode</h4>
<p>To use the continuous mode you need call three functions:</p><ul>
<li><b>void setMode(0)</b> 0 = CONTINUOUS, 1 = SINGLE (default). Note: the mode is not set in the device until an explicit read/request of the ADC (any read call will do).</li>
<li><b>int16_t readADC(uint8_t pin)</b> or <b>void requestADC(uint8_t pin)</b> to get the continuous mode started.</li>
<li><b>int16_t getValue()</b> to return the last value read by the device. Note this can be a different pin, so be warned. Calling this over and over again can give the same value multiple times.</li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">  <span class="comment">// configuration things here</span></div>
<div class="line">  ADS.setMode(ADS.MODE_CONTINUOUS);</div>
<div class="line">  ADS.requestADC(0);              <span class="comment">// request on pin 0</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line">  value = ADS.getValue()</div>
<div class="line">  sleep(1)</div>
<div class="line">}</div>
</div><!-- fragment --><p>See <a href="https://github.com/RobTillaart/ADS1X15/blob/master/examples/ADS_continuous/ADS_continuous.ino">examples</a>By using <b>bool isBusy()</b> or <b>bool isReady()</b> one can wait until new data is available. Note this only works in the SINGLE_SHOT modus.</p>
<p>In continuous mode, you can't use <b>isBusy()</b> or <b>isReady()</b> functions to wait until new data available. Instead you can configure the threshold registers to allow the <b>ALERT/RDY</b> pin to trigger an interrupt signal when conversion data ready.</p>
<h4><a class="anchor" id="autotoc_md45"></a>
Threshold registers</h4>
<p>If the thresholdHigh is set to 0x0100 and the thresholdLow to 0x0000 the <b>ALERT/RDY</b> pin is triggered when a conversion is ready.</p>
<ul>
<li><b>void setComparatorThresholdLow(int16_t lo)</b> writes value to device directly.</li>
<li><b>void setComparatorThresholdHigh(int16_t hi)</b> writes value to device directly.</li>
<li><b>int16_t getComparatorThresholdLow()</b> reads value from device.</li>
<li><b>int16_t getComparatorThresholdHigh()</b> reads value from device.</li>
</ul>
<p>See <a href="https://github.com/RobTillaart/ADS1X15/blob/master/examples/ADS_read_RDY/ADS_read_RDY.ino">examples</a>.</p>
<h4><a class="anchor" id="autotoc_md46"></a>
Comparator</h4>
<p>Please read Page 15 of the datasheet as the behaviour of the comparator is not trivial.</p>
<p>NOTE: all comparator settings are copied to the device only after calling <b>readADC()</b> or <b>requestADC()</b> functions.</p>
<h4><a class="anchor" id="autotoc_md47"></a>
Comparator Mode</h4>
<p>When configured as a <b>TRADITIONAL</b> comparator, the <b>ALERT/RDY</b> pin asserts (active low by default) when conversion data exceed the limit set in the high threshold register. The comparator then de-asserts when the input signal falls below the low threshold register value.</p>
<ul>
<li><b>void setComparatorMode(uint8_t mode)</b> value 0 = TRADITIONAL 1 = WINDOW,</li>
<li><b>uint8_t getComparatorMode()</b> returns value set.</li>
</ul>
<p>If the comparator <b>LATCH</b> is set, the <b>ALERT/RDY</b> pin asserts and it will be reset after reading the sensor (conversion register) again. <em>An SMB alert command (00011001) on the I2C bus will also reset the alert state.</em> <em>Not implemented in the library (yet)</em></p>
<p>In <b>WINDOW</b> comparator mode, the <b>ALERT/RDY</b> pin asserts if conversion data exceeds the high threshold register or falls below the low threshold register. In this mode the alert is held if the <b>LATCH</b> is set. This is similar as above.</p>
<h4><a class="anchor" id="autotoc_md48"></a>
Polarity</h4>
<p>Default state of the <b>ALERT/RDY</b> pin is <b>LOW</b>, can be to set <b>HIGH</b>.</p>
<ul>
<li><b>void setComparatorPolarity(uint8_t pol)</b> Flag is only explicitly set after a <b>readADC()</b> or a <b>requestADC()</b></li>
<li><b>uint8_t getComparatorPolarity()</b> returns value set.</li>
</ul>
<h4><a class="anchor" id="autotoc_md49"></a>
Latch</h4>
<p>Holds the <b>ALERT/RDY</b> to <b>HIGH</b> (or <b>LOW</b> depending on polarity) after triggered even if actual value has been 'restored to normal' value.</p>
<ul>
<li><b>void setComparatorLatch(uint8_t latch)</b> 0 = NO LATCH, not 0 = LATCH</li>
<li><b>uint8_t getComparatorLatch()</b> returns value set.</li>
</ul>
<h4><a class="anchor" id="autotoc_md50"></a>
QueConvert</h4>
<p>Set the number of conversions before trigger activates. The <b>void setComparatorQueConvert(uint8_t mode)</b> is used to set the number of conversions that exceed the threshold before the <b>ALERT/RDY</b> pin is set <b>HIGH</b>. A value of 3 (or above) effectively disables the comparator. See table below.</p>
<ul>
<li><b>void setComparatorQueConvert(uint8_t mode)</b> See table below.</li>
<li><b>uint8_t getComparatorQueConvert()</b> returns value set.</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">value   </th><th class="markdownTableHeadLeft">meaning   </th><th class="markdownTableHeadLeft">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyLeft">trigger alert after 1 conversion   </td><td class="markdownTableBodyLeft"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyLeft">trigger alert after 2 conversions   </td><td class="markdownTableBodyLeft"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">2   </td><td class="markdownTableBodyLeft">trigger alert after 4 conversions   </td><td class="markdownTableBodyLeft"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">3   </td><td class="markdownTableBodyLeft">Disable comparator   </td><td class="markdownTableBodyLeft">default   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md51"></a>
Threshold registers comparator mode</h4>
<p>Depending on the comparator mode <b>TRADITIONAL</b> or <b>WINDOW</b> the thresholds registers mean something different see - Comparator Mode above or datasheet.</p>
<ul>
<li><b>void setComparatorThresholdLow(int16_t lo)</b> set the low threshold; take care the hi &gt;= lo.</li>
<li><b>void setComparatorThresholdHigh(int16_t hi)</b> set the high threshold; take care the hi &gt;= lo.</li>
<li><b>int16_t getComparatorThresholdLow()</b> reads value from device.</li>
<li><b>int16_t getComparatorThresholdHigh()</b> reads value from device.</li>
</ul>
<h2><a class="anchor" id="autotoc_md52"></a>
RP2040 specific</h2>
<ul>
<li><b>bool begin(int sda, int scl)</b> begin communication with the ADC. It has the parameter for selecting on which pins the communication should happen. wireUsed is optional. Check RP2040 Pinout for compatible pins. If, "Wire1" is used, you need to add "&amp;Wire1" in the constructor.</li>
</ul>
<h2><a class="anchor" id="autotoc_md53"></a>
Future ideas &amp; improvements</h2>
<h4><a class="anchor" id="autotoc_md54"></a>
Must</h4>
<ul>
<li>Improve documentation (always)</li>
<li>move code from .h to .cpp (0.4.0)</li>
</ul>
<h4><a class="anchor" id="autotoc_md55"></a>
Should</h4>
<h4><a class="anchor" id="autotoc_md56"></a>
Could</h4>
<ul>
<li>More examples ?</li>
<li>SMB alert command (00011001) on I2C bus?</li>
<li>constructor for <a class="el" href="class_a_d_s1_x15.html">ADS1X15</a> ?</li>
</ul>
<h4><a class="anchor" id="autotoc_md57"></a>
Wont (unless requested)</h4>
<ul>
<li>type flag? </li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath">
    <!-- id is needed for treeview function! -->
    <ul>
        <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_87a455bccb09a92130c26a11a880c98a.html">libs</a></li><li class="navelem"><a class="el" href="dir_8fffdf23cc1bab5d587079d429a41271.html">ADS1X15</a></li>
        <li class="footer">
            Generated on Fri Apr 11 2025 09:24:27 for Electrochemical Gas Sensor Library by <a href="http://www.doxygen.org/index.html">
                <img class="footer" src="doxygen.png" alt="doxygen"
                    onerror="this.onerror=null;this.src='doxygen.svg';" /></a> 1.13.2.
            Dark theme by <a href="http://majerle.eu" target="_new">Tilen Majerle</a>. All rights reserved.
            Copyright: <a href="https://www.soldered.com">Soldered</a>
        </li>
    </ul>
</div>
<script src="custom.js"></script>
</body>
</html>
